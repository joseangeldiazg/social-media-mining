%---------------------------------------------------
% Nombre: capitulo1.tex  
% 
% Texto del capitulo 1
%---------------------------------------------------

\chapter{Desarrollo práctico}

La práctica número 2 de la asignatura Minería de Medios Sociales, se centra en un problema de minería de textos sobre datos obtenidos de Twitter y que será resuelto mediante la herramienta Knime \cite{knime}. Los objetivos de la práctica serán por tanto los siguientes:

\begin{enumerate}
\item Captar y preprocesar los datos provenientes de Twitter. 
\item Aplicar transformaciones y visualización mediante Tag Cloud.
\item Aplicar un algoritmo de minería de datos sobre los datos. 
\end{enumerate}

\section{Captación y preprocesado}

En esta sección veremos el proceso y los nodos de captación de datos, así como del preprocesado de los documentos. 

\subsection{Captación}

La captación de los datos se ha realizado utilizando los nodos de conexión con la API de Twitter de Knime (figura \ref{1}). Estos se han captado sobre el hashtag \textbf{tengoUnMásterEn} que fue \textbf{trending topic} la tarde del 10 de mayo. Hay un total de 2967 documentos (tuits) sobre la temática. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{./Capitulo1/Imagenes/1.png}
	\caption{Captación de datos.}
	\label{1}
\end{figure}

Una vez captados los datos, tendremos una tabla como la que podemos ver en la figura \ref{entrada} y podremos pasar al preprocesado de los mismos. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{./Capitulo1/Imagenes/entrada.png}
	\caption{Datos de entrada.}
	\label{entrada}
\end{figure}

\subsection{Preprocesado}

Para el preprocesado de los datos se han usado diversas técnicas bien definidas en el proceso de minería de textos. Tales como: 

\begin{itemize}
	\item Cambio de signos de puntuación a palabras de sentimiento, por ejemplo \textbf{ :) } pasa a \textbf{feliz}.
	\item Paso a minúsculas.
	\item Eliminación de palabras vacías.
	\item Eliminación de  nombres de usuario para evitar problemas con los RT. 
	\item Eliminación de signos de puntuación. 
\end{itemize}

Para añadir aun más valor a las posibles visualizaciones se usa un \textbf{POS Tagger} para colorear en función de la categoría gramatical de la palabra. El flujo usado para estos pasos puede verse en la figura \ref{2}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.5]{./Capitulo1/Imagenes/2.png}
	\caption{Preprocesado y enriquecimiento de datos.}
	\label{2}
\end{figure}

\section{Transformaciones y visualización}

Para poder visualizar los datos y trabajar con ellos, es necesario obtener representaciones intermedias de los mismos, así como algunas estadísticas sobre ellos. En el gráfico \ref{3} podemos ver el flujo usado, donde por un lado pasamos los datos a una \textbf{bolsa de palabras} \cite{b} y posteriormente calculamos sus valores \textbf{TF}, \textbf{IDF} y por medio de una simple multiplicación su valor \textbf{TF-IDF}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{./Capitulo1/Imagenes/3.png}
	\caption{Flujo de transformación y computo de estadísticas.}
	\label{3}
\end{figure}

El resultado final del \textit{tag cloud}, cuyos colores representan el tipo de palabra podemos verlo en la figura \ref{tag}. Si analizamos los resultados obtenidos en la nube de palabras podemos comprobar como casi la totalidad de las personas que han tuiteado sobre el hashtag lo hacen en modo mofa o broma, encontrando palabras coloquiales, lo que nos lleva a deducir que es un hashtag creado para mofarse del \textbf{caso Cifuentes}. Por otro lado, también encontramos algunas palabras como \textbf{superación, integridad, currar} que sin duda en función del hashtag que tenemos entre manos vendrá de un grupo de personas que en lugar de mofarse intentan darle valor. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.45]{./Capitulo1/Imagenes/tag.png}
	\caption{Tag cloud sobre el hashtag TengoUnMásterEn.}
	\label{tag}
\end{figure}

\section{Minería de datos}

La finalidad de muchos procesos de minería de textos es poder aplicar tras los pasos de pre-procesado algún algoritmo de minería de datos para obtener información relevante de los mismos. En nuestro caso, nos hemos decantado por las reglas de asociación para descubrir causalidad de co-ocurrencia entre los términos de nuestros tuits para poder discernir ciertas tendencias en los datos. Para poder utilizar reglas de asociación, primeramente hemos tenido que realizar algunas  transformaciones previas mediante las cuales hemos obtenido nuestros tuits en forma de colección de transacciones en las que cada palabra de un tuit representa un ítem. Para realizar esto, hemos usado el flujo que podemos ver en en la figura \ref{tra}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{./Capitulo1/Imagenes/tra.png}
	\caption{Flujo para obtener transacciones.}
	\label{tra}
\end{figure}

Una vez obtenidas las transacciones, se aplica la minería de datos (figura \ref{mining}) usando el módulo de reglas de asociación para obtener las reglas con un soporte mínimo de 0.01 y una confianza de 0.6. Tras finalizar el proceso se obtienen  un total de \textbf{20625}, ya que se ha usado el algoritmo Apriori (exhaustivo). Por último, estas reglas se han visualizado  (figura \ref{graf}) mediante el nodo \textbf{Rule Viewer}, pero hemos de decir que este nodo es bastante inútil ya que la información que ofrece pese a tener documentación no permite visualizar nada correctamente con un conjunto de reglas elevado, problema común en casi todos los métodos de visualización de reglas. Por ello, este método se descarto y se pasó al análisis de la tabla de salida con las reglas donde se puede extraer información relevante de manera sencilla ordenando las reglas en función de las medidas de bondad. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.7]{./Capitulo1/Imagenes/mining.png}
	\caption{Flujo de minería de datos.}
	\label{mining}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.27]{./Capitulo1/Imagenes/graf.png}
	\caption{Gráfico de reglas.}
	\label{graf}
\end{figure}

Algunas reglas relevantes extraidas podrían ser las que vemos en las figuras \ref{r1}, \ref{r2} y \ref{r3}, donde podemos constatar el enfado de la sociedad con el partido del gobierno respecto a ciertos temas y que se ha aprovechado ese hashtag, relativo a mofa con el caso Cifuentes, para criticar duramente al partido en otras políticas y en materia de su posción ante el escandalo del máster.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.45]{./Capitulo1/Imagenes/r1.png}
	\caption{Regla 1.}
	\label{r1}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.45]{./Capitulo1/Imagenes/r2.png}
	\caption{Regla 2.}
	\label{r2}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.45]{./Capitulo1/Imagenes/r3.png}
	\caption{Regla 3.}
	\label{r3}
	
\end{figure}
\section{Conclusiones}

Tras la realización de la práctica 2 de la asignatura, podemos concluir que Knime es una herramienta versátil y que nos permite utilizar innumerables técnicas  de ciencia de datos y pruebas de manera sencilla, siendo una gran `caja de herramientas'. Por otro lado, la herramienta se queda corta en diversos aspectos de rendimiento, así como limitaciones a la hora de realizar funciones más específicas ya que los nodos y repositorios de nodos son más limitados que las funciones que podemos encontrar en paquetes de R por ejemplo. 

\clearpage
%---------------------------------------------------